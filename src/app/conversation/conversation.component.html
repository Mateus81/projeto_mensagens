<div *ngIf="conversa && conversa.usuarioDest && conversa.usuarioDest.id !== currentUser.id" class="conversation-container">
    <h2>Conversando com {{ conversa.usuarioDest.nome }}</h2>

    <div *ngFor="let mensagem of mensagens" class="mensagem">
      <div class="mensagem-texto">
        <span *ngIf="mensagem.usuarioRemetente">{{ mensagem.usuarioRemetente.nome }}:</span>
        <span>{{ mensagem.texto }}</span>
      </div>
      <div class="mensagem-acoes">
        <button (click)="marcaComoLida(mensagem.id!)" [disabled]="mensagem.vista">Marcar como lida</button>
        <button (click)="apagaMensagem(mensagem.id!)">Deletar</button>
        <button (click)="atualizaMensagem(mensagem.id!, mensagem)">Editar</button>
      </div>
    </div>

    <div class="nova-mensagem">
      <textarea [(ngModel)]="novaMensagem" placeholder="Digite sua mensagem"></textarea>
      <button (click)="enviarMensagem()">Enviar</button>
    </div>
    <div class="marca-todas-como-lida">
      <button (click)="marcaTodasComoLidas()">Marca mensagens como lidas</button>
    </div>

    <footer>
      <p>Retornar a lista de conversas?</p>
      <button (click)="voltarParaConversas()">Retornar</button>
    </footer>
</div>
